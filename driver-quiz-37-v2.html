<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
  <title>æµ‹æµ‹ä½ æ˜¯å“ªä½ F1 è½¦æ‰‹ï¼ˆ37äººç‰ˆ v2ï¼‰</title>
  <style>
    :root{
      --bg:#070b18; --fg:#eaf0ff; --muted:rgba(255,255,255,.72);
      --card:rgba(255,255,255,.06); --bd:rgba(255,255,255,.16);
      --a:#ff3b3b; --b:#38bdf8; --c:#a78bfa;
    }
    html,body{height:100%;margin:0}
    body{
      display:flex;align-items:center;justify-content:center;
      background: radial-gradient(1000px 560px at 50% 0%, #1b2450 0%, var(--bg) 60%);
      color:var(--fg);
      font-family: ui-sans-serif,system-ui,-apple-system,"Segoe UI",Arial;
      padding:18px;
    }
    .wrap{width:min(1100px, 96vw)}
    .top{display:flex;gap:10px;align-items:center;justify-content:space-between;flex-wrap:wrap;margin-bottom:12px}
    .brand{display:flex;gap:10px;align-items:center;font-weight:950;letter-spacing:.2px}
    .dot{width:10px;height:10px;border-radius:999px;background:linear-gradient(90deg,var(--a),var(--b))}
    .pill{
      border:1px solid var(--bd); background:var(--card);
      padding:8px 10px;border-radius:999px;font-size:14px;
      backdrop-filter: blur(8px);
    }
    .panel{
      border:1px solid var(--bd); background:var(--card);
      border-radius:16px; padding:16px;
      box-shadow:0 18px 55px rgba(0,0,0,.45);
    }
    h1{font-size:20px;margin:0 0 6px 0}
    .sub{color:var(--muted);font-size:14px;line-height:1.6;margin:0 0 12px 0}
    .bar{
      height:10px;border-radius:999px;background:rgba(255,255,255,.10);
      border:1px solid rgba(255,255,255,.12); overflow:hidden; margin:10px 0 2px;
    }
    .bar > div{height:100%;width:0%;background:linear-gradient(90deg,var(--b),var(--c))}
    .small{font-size:12px;color:var(--muted)}
    .answers{display:grid;gap:10px;margin-top:12px}
    button.opt{
      text-align:left; width:100%;
      border:1px solid rgba(255,255,255,.18);
      background:rgba(255,255,255,.05);
      color:var(--fg); padding:12px 12px;border-radius:12px;
      cursor:pointer; font-weight:800; line-height:1.3;
      transition: transform .05s ease, background .12s ease, border-color .12s ease;
      touch-action: manipulation;
    }
    button.opt:hover{background:rgba(56,189,248,.10); border-color:rgba(56,189,248,.35)}
    button.opt:active{transform:scale(.99)}
    .row{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px}
    button.action{
      border:1px solid rgba(255,255,255,.20);
      background:rgba(56,189,248,.14);
      color:var(--fg); padding:10px 12px;border-radius:12px;
      cursor:pointer;font-weight:950
    }
    button.action.secondary{background:rgba(255,255,255,.06)}
    .resultCard{
      display:flex;gap:12px;align-items:flex-start;
      border:1px solid rgba(255,255,255,.18);
      background:rgba(0,0,0,.18);
      border-radius:14px;padding:12px;margin-top:12px;
    }
    .badge{
      min-width:62px;height:62px;border-radius:16px;
      background:linear-gradient(135deg,rgba(255,59,59,.95),rgba(56,189,248,.75));
      display:flex;align-items:center;justify-content:center;
      font-size:26px;font-weight:1000;
      box-shadow:0 10px 22px rgba(0,0,0,.35);
    }
    .rtitle{font-size:18px;font-weight:1000;margin:0}
    .rdesc{margin:6px 0 0 0;color:var(--muted);line-height:1.55}
    .tags{display:flex;gap:8px;flex-wrap:wrap;margin-top:10px}
    .tag{font-size:12px;padding:5px 8px;border-radius:999px;border:1px solid rgba(255,255,255,.16);background:rgba(255,255,255,.06)}
    .mini{margin-top:10px;color:var(--muted);font-size:13px;line-height:1.55}
    .foot{margin-top:10px;font-size:12px;color:rgba(255,255,255,.55)}
    .kbd{padding:1px 6px;border-radius:6px;border:1px solid rgba(255,255,255,.25);background:rgba(255,255,255,.08)}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="top">
      <div class="brand"><span class="dot"></span>F1 å°æ¸¸æˆï¼šè½¦æ‰‹äººæ ¼æµ‹è¯•ï¼ˆ37äººç‰ˆ v2ï¼‰</div>
      <div class="pill" id="status">æœªå¼€å§‹</div>
    </div>

    <div class="panel">
      <h1 id="title">ç‚¹å‡»å¼€å§‹ï¼Œæµ‹æµ‹ä½ çš„â€œè½¦æ‰‹æ°”è´¨â€ ğŸ</h1>
      <p class="sub" id="subtitle">ä¸€å…± 16 é¢˜ï¼Œé€‰ä½ æœ€åƒçš„ååº”ã€‚ç»“æœä»…ä¾›å¨±ä¹ã€‚</p>

      <div class="bar" aria-label="è¿›åº¦æ¡"><div id="bar"></div></div>
      <div class="small"><span id="progress">0/16</span></div>

      <div id="quizArea" style="margin-top:10px"></div>

      <div class="row">
        <button class="action" id="startBtn">å¼€å§‹æµ‹è¯•</button>
        <button class="action secondary" id="restartBtn" style="display:none">å†æµ‹ä¸€æ¬¡</button>
        <button class="action secondary" id="shareBtn" style="display:none">å¤åˆ¶ç»“æœæ–‡æ¡ˆ</button>
      </div>

      <div class="foot">ç”µè„‘å¯ç”¨ <span class="kbd">1-4</span> å¿«é€‰ç­”æ¡ˆï¼›æ‰‹æœºç›´æ¥ç‚¹é€‰å³å¯ã€‚</div>
    </div>
  </div>

<script>
(() => {
  // ===== ç»´åº¦ï¼ˆæŠŠâ€œè½®èƒ/é›¨æˆ˜/æ²Ÿé€šâ€ä¹Ÿä½œä¸ºåŒºåˆ†ç»´åº¦ï¼‰=====
  const traits = ["pace","racecraft","strategy","risk","pressure","craft","consistency","charisma","tyre","wet","comms"];

  // ===== 37 ä½è½¦æ‰‹ï¼ˆåå­—/emoji/tags/descï¼‰=====
  const allDrivers = [
    // 2025 ç°å½¹ 20
    { id:"ver", name:"é©¬å…‹æ–¯Â·ç»´æ–¯å¡”æ½˜ Max Verstappen", emoji:"ğŸ¦", tags:["æè‡´è¿›æ”»","å†·é™è®¡ç®—","èƒœè´Ÿæ¬²"], desc:"æƒ³èµ¢å°±ç°åœ¨èµ¢ï¼šå‡ºæ‰‹æœæ–­ã€åˆ¤æ–­å¿«ã€æŠ—å‹å¼ºï¼Œç›®æ ‡æ„Ÿç‰¹åˆ«æ¸…æ™°ã€‚"},
    { id:"law", name:"åˆ©äºšå§†Â·åŠ³æ£® Liam Lawson", emoji:"ğŸ§¨", tags:["æ–°ç§€ç¡¬æ°”","æ•¢å¯¹æŠ—","ä¸Šæ‰‹å¿«"], desc:"æ–°ç§€ç¡¬æ°”æ´¾ï¼šä¸æ€•å¯¹æŠ—ï¼Œä¸Šæ‰‹é€Ÿåº¦å¿«ï¼Œæ•¢åœ¨å¼ºè€…é¢å‰å‡ºæ‰‹ã€‚"},
    { id:"lec", name:"å¤å°”Â·å‹’å…‹è±å°” Charles Leclerc", emoji:"ğŸ¯", tags:["å¤©èµ‹é€Ÿåº¦","å®Œç¾ä¸»ä¹‰","æé™åœˆ"], desc:"å¤©èµ‹å‹ï¼šå†²åˆºå¾ˆé”‹åˆ©ï¼Œè¿½æ±‚æ¼‚äº®çš„ä¸€å‡»ï¼Œå¯¹è‡ªå·±è¦æ±‚å¾ˆä¸¥ã€‚"},
    { id:"ham", name:"åˆ˜æ˜“æ–¯Â·æ±‰å¯†å°”é¡¿ Lewis Hamilton", emoji:"ğŸ‘‘", tags:["å¤§å±€è§‚","ç¨³å®šè¾“å‡º","å…³é”®åœˆ"], desc:"å…³é”®æ—¶åˆ»æ›´å¼ºï¼šèŠ‚å¥ç¨³ã€ç­–ç•¥å¼ºï¼Œè¶Šåˆ°é‡è¦èŠ‚ç‚¹è¶Šèƒ½æ‹‰æ»¡è¡¨ç°ã€‚"},
    { id:"nor", name:"å…°å¤šÂ·è¯ºé‡Œæ–¯ Lando Norris", emoji:"ğŸ˜„", tags:["å¿«ä¹ä½†ç‹ ","ååº”å¿«","èŠ‚å¥å˜åŒ–"], desc:"å¼€æœ—ç‹ è§’è‰²ï¼šè¡¨é¢è½»æ¾ï¼ŒçœŸä¸Šå¼ºåº¦æ—¶ä¸€ç‚¹ä¸å«ç³Šã€‚"},
    { id:"pia", name:"å¥¥æ–¯å¡Â·çš®äºšæ–¯ç‰¹é‡Œ Oscar Piastri", emoji:"ğŸ§ ", tags:["å†·é™","å­¦ä¹ å¿«","ç¨³ç‹ "], desc:"å†·é™é«˜æ•ˆï¼šä¸åµä¸é—¹ä½†ä¸€ç›´è¿›æ­¥ï¼Œå…³é”®æ—¶åˆ»å¾ˆç¨³ã€‚"},
    { id:"rus", name:"ä¹”æ²»Â·æ‹‰å¡å°” George Russell", emoji:"ğŸ§Š", tags:["ç¡¬","å‡†","ä¸æœè¾“"], desc:"ç¡¬è€Œå‡†ï¼šå¯¹æŠ—å¼ºï¼ŒèŠ‚å¥å‡†ï¼Œé‡åˆ°æœºä¼šå¾ˆæœæ–­ã€‚"},
    { id:"ant", name:"å®‰å¾·çƒˆäºšÂ·åŸºç±³Â·å®‰ä¸œå†…åˆ© Andrea Kimi Antonelli", emoji:"â­", tags:["æ–°ç§€å¤©èµ‹","å­¦ä¹ å¿«","ä¸Šé™é«˜"], desc:"å¤©èµ‹æ–°ç§€ï¼šå­¦ä¹ é€Ÿåº¦å¾ˆå¿«ï¼Œè¶Šè·‘è¶Šå¼ºï¼Œä¸Šé™å¾ˆé«˜ã€‚"},
    { id:"alo", name:"è´¹å°”å—å¤šÂ·é˜¿éš†ç´¢ Fernando Alonso", emoji:"ğŸ¦Š", tags:["è¯»å±€è€è¾£","æŠ“æœºä¼š","æˆ˜æœ¯çµæ´»"], desc:"è¯»å±€é«˜æ‰‹ï¼šå¤æ‚å±€é¢é‡Œæ‰¾çªç ´å£ï¼Œç”¨æœ€å°ä»£ä»·æ¢æœ€å¤§æ”¶ç›Šã€‚"},
    { id:"str", name:"å…°æ–¯Â·æ–¯ç‰¹ç½—å°” Lance Stroll", emoji:"ğŸ§©", tags:["éŸ§æ€§","ç¨³","æŠ—å‹"], desc:"éŸ§æ€§æ´¾ï¼šé€†é£å±€ä¸å´©ï¼Œèƒ½æ…¢æ…¢æŠŠèŠ‚å¥æ‰¾å›æ¥ã€‚"},
    { id:"tsu", name:"è§’ç”°è£•æ¯… Yuki Tsunoda", emoji:"ğŸ”¥", tags:["çˆ†å‘åŠ›","æ•¢æ‹¼","æƒ…ç»ªçœŸå®"], desc:"çˆ†å‘å‹ï¼šçŠ¶æ€æ¥äº†å¾ˆå¿«å¾ˆçŒ›ï¼Œæ•¢æ‹¼æ•¢æŠ¢ã€‚"},
    { id:"had", name:"ä¼Šè¨å…‹Â·å“ˆè´¾å°” Isack Hadjar", emoji:"âš¡", tags:["æ–°ç§€é€Ÿåº¦","é”","æ•¢å†²"], desc:"é”åˆ©æ–°ç§€ï¼šé€Ÿåº¦å¾ˆå°–ï¼Œæ•¢æŠŠæœºä¼šå˜æˆè¿›æ”»ã€‚"},
    { id:"bea", name:"å¥¥åˆ©å¼—Â·è´å°”æ›¼ Oliver Bearman", emoji:"ğŸŸ©", tags:["æ–°ç§€æ²‰ç¨³","ä¸´åœºå¼º","æŠ—å‹"], desc:"æ²‰ç¨³æ–°ç§€ï¼šä¸´åœºä¸æ…Œï¼Œè¶Šåˆ°å‹åŠ›å±€è¶Šèƒ½ç¨³ä½å‘æŒ¥ã€‚"},
    { id:"oco", name:"åŸƒæ–¯ç‰¹ç­Â·å¥¥åº· Esteban Ocon", emoji:"ğŸ›¡ï¸", tags:["å¼ºç¡¬","å¯¹æŠ—","ä¸è®©"], desc:"å¼ºç¡¬å¯¹æŠ—æ´¾ï¼šä½ç½®ä¸è½»æ˜“äº¤ï¼Œå…³é”®æ—¶å€™å¾ˆç¡¬ã€‚"},
    { id:"gas", name:"çš®åŸƒå°”Â·åŠ æ–¯åˆ© Pierre Gasly", emoji:"ğŸ’ ", tags:["èŠ‚å¥æ´¾","åå¼¹åŠ›","ç¨³"], desc:"åå¼¹å‹ï¼šä½è°·èƒ½çˆ¬å‡ºæ¥ï¼ŒçŠ¶æ€å›æ¥æ—¶èŠ‚å¥å¾ˆå¼ºã€‚"},
    { id:"doo", name:"æ°å…‹Â·æœæ±‰ Jack Doohan", emoji:"ğŸ¹", tags:["æ–°ç§€å†²åŠ²","æ‰§è¡ŒåŠ›","æƒ³è¯æ˜"], desc:"æƒ³è¯æ˜è‡ªå·±çš„æ–°ç§€ï¼šæ‰§è¡ŒåŠ›å¼ºï¼Œå†²åŠ²è¶³ã€‚"},
    { id:"alb", name:"äºšå†å…‹æ–¯Â·é˜¿å°”æœ¬ Alex Albon", emoji:"ğŸŸ¦", tags:["ç¨³","æ•‘è½¦","æ§åˆ¶"], desc:"æé™æ§åˆ¶å‹ï¼šèƒ½æŠŠéš¾å±€é¢å¼€å¾—å¾ˆå¹²å‡€ï¼Œæ§åˆ¶åŠ›å¼ºã€‚"},
    { id:"sai", name:"å¡æ´›æ–¯Â·å¡æ©æ–¯ Carlos Sainz", emoji:"ğŸ§ ", tags:["ç­–ç•¥æ§","ç¨³ä¸­æ±‚èƒœ","æ‰§è¡ŒåŠ›"], desc:"ä¼šåšé¢˜ï¼šè§„åˆ’å’Œæ‰§è¡Œå¼ºï¼ŒæŠŠèƒœç‡ä¸€ç‚¹ç‚¹å †èµ·æ¥ã€‚"},
    { id:"hul", name:"å°¼ç§‘Â·éœè‚¯ä¼¯æ ¼ Nico HÃ¼lkenberg", emoji:"ğŸ§°", tags:["ç»éªŒ","ç¨³å®š","å°‘å¤±è¯¯"], desc:"ç»éªŒæ´¾ï¼šç¨³å®šå°‘å¤±è¯¯ï¼Œå…³é”®æ—¶åˆ»æŠŠè½¦å¸¦å›å®¶ã€‚"},
    { id:"bor", name:"åŠ å¸ƒé‡ŒåŸƒå°”Â·åšæ‰˜è±æ‰˜ Gabriel Bortoleto", emoji:"ğŸŒŸ", tags:["æ–°ç§€å¤©èµ‹","ç¨³å®šä¸Šå‡","æœªæ¥æ„Ÿ"], desc:"ç¨³æ­¥ä¸Šå‡çš„æ–°ç§€ï¼šè¶Šè·‘è¶Šå¼ºï¼Œç¨³å®šæ€§çªå‡ºã€‚"},
    // é¢å¤–ï¼ˆç»å…¸/è¿‘ä»£/ä½ ç‚¹åï¼‰
    { id:"msc", name:"è¿ˆå…‹å°”Â·èˆ’é©¬èµ« Michael Schumacher", emoji:"ğŸï¸", tags:["ä¸“æ³¨","é•¿è·ç¦»","æ‰§è¡Œ"], desc:"å† å†›å·¥å‚å‹ï¼šä¸“æ³¨åº¦æ‹‰æ»¡ã€æ‰§è¡ŒåŠ›æƒŠäººï¼Œèƒ½æŠŠä¼˜åŠ¿ç¨³å®šè½¬åŒ–ä¸ºèƒœåˆ©ã€‚"},
    { id:"sen", name:"åŸƒå°”é¡¿Â·å¡çº³ Ayrton Senna", emoji:"âš¡", tags:["æ’ä½ç¥é€Ÿ","ä¿¡å¿µ","æé™"], desc:"ä¿¡å¿µé©±åŠ¨çš„æé™æ´¾ï¼šå…³é”®ä¸€åœˆæ•¢æŠŠè¾¹ç•Œæ¨åˆ°æœ€å¤–æ²¿ã€‚"},
    { id:"pro", name:"é˜¿å…°Â·æ™®ç½—æ–¯ç‰¹ Alain Prost", emoji:"ğŸ§©", tags:["ç­–ç•¥","ä½å¤±è¯¯","ç®—å¾—ç»†"], desc:"æ•™æˆï¼šç”¨æ›´å°‘é£é™©æ¢æ›´é«˜èƒœç‡ï¼ŒæŠŠæ¯”èµ›å˜æˆå¯è§£çš„é¢˜ã€‚"},
    { id:"man", name:"å¥ˆæ°å°”Â·æ›¼å¡å°” Nigel Mansell", emoji:"ğŸ’¥", tags:["ç¡¬åˆš","æ°”åŠ¿","æ•¢æ‹¼"], desc:"æ–—å£«ï¼šæ•¢é¡¶æ•¢æŠ¢æ•¢æ‰›ï¼Œæ°”åŠ¿èµ·æ¥å¾ˆéš¾è¢«å‹ä½ã€‚"},
    { id:"hak", name:"ç±³å¡Â·å“ˆåŸºå® Mika HÃ¤kkinen", emoji:"ğŸ§Š", tags:["å†·é™é«˜é€Ÿ","èŠ‚å¥å‡†","å…³é”®å‡ºæ‰‹"], desc:"å†°äººç³»ï¼šå¤–è¡¨å¹³é™ï¼Œå†…æ ¸å¾ˆå¿«ï¼›å‡ºæ‰‹ä¸å¤šä½†å¾€å¾€è‡´å‘½ã€‚"},
    { id:"rai", name:"åŸºç±³Â·è±ç§‘å® Kimi RÃ¤ikkÃ¶nen", emoji:"ğŸ¥¶", tags:["ä¸åºŸè¯","èŠ‚å¥æ€ª","å¿ƒæ€ç¨³"], desc:"ä½èƒ½è€—é«˜è¾“å‡ºï¼šä¸çˆ±è§£é‡Šï¼ŒçŠ¶æ€ä¸€åˆ°å°±å¾ˆææ€–ã€‚"},
    { id:"but", name:"ç®€æ£®Â·å·´é¡¿ Jenson Button", emoji:"ğŸŒ¤ï¸", tags:["ç»†è…»","è½®èƒ","èªæ˜å–èˆ"], desc:"ç»†è…»ä¸åˆ¤æ–­ï¼šæ‡‚å¾—ä»€ä¹ˆæ—¶å€™è¯¥å¿ã€ä»€ä¹ˆæ—¶å€™è¯¥æ‰“ã€‚"},
    { id:"web", name:"é©¬å…‹Â·éŸ¦ä¼¯ Mark Webber", emoji:"ğŸ›¡ï¸", tags:["å¼ºç¡¬","ç»éªŒ","ç¨³æ‰ç¨³æ‰“"], desc:"è€ç»ƒå¼ºç¡¬æ´¾ï¼šå¯¹æŠ—ä¸è™šï¼ŒèŠ‚å¥ç¨³ï¼Œæœºä¼šæ¥å¾—æœæ–­ã€‚"},
    { id:"vet", name:"å¡å·´æ–¯è’‚å®‰Â·ç»´ç‰¹å°” Sebastian Vettel", emoji:"ğŸ", tags:["èŠ‚å¥ç»Ÿæ²»","ä¸“æ³¨","é«˜ä¸Šé™"], desc:"èŠ‚å¥ç»Ÿæ²»å‹ï¼šè¿›å…¥çŠ¶æ€åèƒ½è¿ç»­è¾“å‡ºé«˜è´¨é‡è¡¨ç°ã€‚"},
    { id:"ros", name:"å°¼ç§‘Â·ç½—æ–¯ä¼¯æ ¼ Nico Rosberg", emoji:"ğŸ“ˆ", tags:["è‡ªå¾‹","è®¡ç®—","ç›®æ ‡æ„Ÿ"], desc:"ç²¾è‹±å­¦éœ¸å‹ï¼šé åˆ†æã€è‡ªå¾‹ä¸æ‰§è¡ŒæŠŠè‡ªå·±æ¨åˆ°æœ€å¼ºã€‚"},
    { id:"per", name:"å¡å°”å‰å¥¥Â·ä½©é›·å…¹ Sergio PÃ©rez", emoji:"ğŸ›", tags:["è½®èƒ","é€†é£å±€","è€å¿ƒ"], desc:"æŠŠå¤æ‚å±€é¢æ…¢æ…¢æ°å›æ¥ï¼šè½®èƒä¸èŠ‚å¥ç®¡ç†æ˜¯å¼ºé¡¹ã€‚"},
    { id:"mag", name:"å‡¯æ–‡Â·é©¬æ ¼åŠªæ£® Kevin Magnussen", emoji:"ğŸ§±", tags:["å¼ºç¡¬é˜²å®ˆ","ä¸è®©ä½","ç¡¬åˆš"], desc:"å¼ºç¡¬é˜²å®ˆæ´¾ï¼šå…³é”®ä½ç½®ç»ä¸è½»æ˜“äº¤å‡ºå»ã€‚"},
    { id:"ric", name:"ä¸¹å°¼å°”Â·é‡Œå¡å¤š Daniel Ricciardo", emoji:"ğŸ˜", tags:["æ™šåˆ¹è½¦","å¿«ä¹ç‹ ","ä¸´åœºæ„Ÿ"], desc:"å¿«ä¹æ€æ‰‹ï¼šæ°”æ°›æ‹…å½“ä½†å‡ºæ‰‹å¾ˆç‹ ï¼Œæ™šåˆ¹è½¦ä»£è¡¨ã€‚"},
    { id:"bot", name:"ç“¦å°”ç‰¹é‡ŒÂ·åšå¡”æ–¯ Valtteri Bottas", emoji:"ğŸ§Š", tags:["ç¨³å®š","å¹²å‡€","èŠ‚å¥"], desc:"å¹²å‡€ç¨³å®šå‹ï¼šå°‘å¤±è¯¯ã€èŠ‚å¥å¥½ï¼ŒæŠŠè¯¥æ‹¿çš„åˆ†æ‹¿åˆ°æ‰‹ã€‚"},
    { id:"zhou", name:"å‘¨å† å®‡ Zhou Guanyu", emoji:"ğŸŸ¦", tags:["ç¨³","å­¦ä¹ å¿«","è€å¿ƒ"], desc:"ç¨³æ­¥æˆé•¿å‹ï¼šèŠ‚å¥æ‰å®ï¼Œè¶Šè·‘è¶Šå¼ºã€‚"},
    { id:"col", name:"å¼—æœ—ç§‘Â·ç§‘æ‹‰å¹³æ‰˜ Franco Colapinto", emoji:"ğŸŒªï¸", tags:["æ–°ç§€å†²åŠ²","èƒ†å­å¤§","ä¸Šé™æœªçŸ¥"], desc:"æ–°ç§€å†²åˆºå‹ï¼šæ•¢æ‹¼æ•¢å†²ï¼ŒçŠ¶æ€ä¸Šæ¥å¾ˆäº®çœ¼ã€‚"},
    { id:"lin", name:"é˜¿ç»´å¾·Â·æ—å¾·å¸ƒæ‹‰å¾· Arvid Lindblad", emoji:"ğŸš€", tags:["æ–°ç§€å¤©èµ‹","å†²åŠ²","æœªæ¥æ„Ÿ"], desc:"æœªæ¥æ´¾æ–°ç§€ï¼šæ•¢æŠŠæé™æ¨å¼€ï¼Œæˆé•¿ç©ºé—´å¾ˆå¤§ã€‚"},
  ];

  // ===== è½¦æ‰‹ profileï¼ˆå¨±ä¹å‘ï¼Œç”¨æ¥åšç›¸ä¼¼åº¦åŒ¹é…ï¼›ä¸ä»£è¡¨çœŸå®èƒ½åŠ›ï¼‰=====
  // æ•°å€¼èŒƒå›´å¤§è‡´ 0-5
  const P = {
    // ç°å½¹
    ver:{pace:5,racecraft:5,strategy:3,risk:4,pressure:4,craft:5,consistency:4,charisma:3,tyre:3,wet:4,comms:3},
    law:{pace:4,racecraft:4,strategy:2,risk:4,pressure:3,craft:4,consistency:3,charisma:3,tyre:3,wet:3,comms:3},
    lec:{pace:5,racecraft:3,strategy:2,risk:3,pressure:3,craft:4,consistency:3,charisma:3,tyre:3,wet:3,comms:3},
    ham:{pace:4,racecraft:4,strategy:4,risk:2,pressure:5,craft:4,consistency:5,charisma:4,tyre:4,wet:4,comms:5},
    nor:{pace:4,racecraft:4,strategy:3,risk:3,pressure:3,craft:4,consistency:4,charisma:5,tyre:3,wet:3,comms:4},
    pia:{pace:4,racecraft:4,strategy:3,risk:2,pressure:4,craft:4,consistency:4,charisma:3,tyre:3,wet:3,comms:3},
    rus:{pace:4,racecraft:4,strategy:3,risk:3,pressure:4,craft:4,consistency:4,charisma:3,tyre:3,wet:3,comms:3},
    ant:{pace:4,racecraft:3,strategy:3,risk:3,pressure:3,craft:4,consistency:3,charisma:3,tyre:3,wet:3,comms:3},
    alo:{pace:4,racecraft:5,strategy:4,risk:3,pressure:4,craft:5,consistency:4,charisma:3,tyre:4,wet:4,comms:4},
    str:{pace:3,racecraft:3,strategy:3,risk:2,pressure:3,craft:3,consistency:3,charisma:3,tyre:3,wet:3,comms:3},
    tsu:{pace:4,racecraft:4,strategy:2,risk:4,pressure:3,craft:4,consistency:3,charisma:4,tyre:3,wet:3,comms:3},
    had:{pace:4,racecraft:3,strategy:2,risk:4,pressure:3,craft:4,consistency:3,charisma:3,tyre:3,wet:3,comms:3},
    bea:{pace:4,racecraft:3,strategy:3,risk:3,pressure:4,craft:4,consistency:4,charisma:3,tyre:3,wet:3,comms:3},
    oco:{pace:3,racecraft:4,strategy:3,risk:3,pressure:4,craft:3,consistency:4,charisma:2,tyre:3,wet:3,comms:3},
    gas:{pace:4,racecraft:3,strategy:3,risk:3,pressure:3,craft:4,consistency:3,charisma:3,tyre:3,wet:3,comms:3},
    doo:{pace:3,racecraft:3,strategy:2,risk:3,pressure:3,craft:3,consistency:3,charisma:3,tyre:3,wet:3,comms:3},
    alb:{pace:4,racecraft:3,strategy:3,risk:2,pressure:4,craft:5,consistency:4,charisma:3,tyre:3,wet:3,comms:3},
    sai:{pace:4,racecraft:3,strategy:5,risk:2,pressure:4,craft:3,consistency:5,charisma:3,tyre:4,wet:3,comms:4},
    hul:{pace:3,racecraft:3,strategy:3,risk:2,pressure:4,craft:3,consistency:4,charisma:2,tyre:3,wet:3,comms:3},
    bor:{pace:4,racecraft:3,strategy:3,risk:3,pressure:3,craft:4,consistency:4,charisma:3,tyre:3,wet:3,comms:3},

    // ç»å…¸/è¿‘ä»£/è¿½åŠ 
    msc:{pace:4,racecraft:4,strategy:3,risk:2,pressure:4,craft:4,consistency:5,charisma:3,tyre:4,wet:4,comms:4},
    sen:{pace:5,racecraft:4,strategy:2,risk:4,pressure:4,craft:4,consistency:3,charisma:4,tyre:3,wet:5,comms:3},
    pro:{pace:4,racecraft:3,strategy:5,risk:2,pressure:4,craft:3,consistency:5,charisma:3,tyre:4,wet:3,comms:4},
    man:{pace:4,racecraft:5,strategy:2,risk:4,pressure:3,craft:4,consistency:3,charisma:4,tyre:3,wet:3,comms:3},
    hak:{pace:4,racecraft:4,strategy:3,risk:2,pressure:4,craft:4,consistency:4,charisma:2,tyre:3,wet:4,comms:3},
    rai:{pace:4,racecraft:4,strategy:3,risk:2,pressure:4,craft:4,consistency:4,charisma:2,tyre:4,wet:4,comms:2},
    but:{pace:4,racecraft:3,strategy:4,risk:2,pressure:4,craft:4,consistency:5,charisma:4,tyre:5,wet:3,comms:4},
    web:{pace:4,racecraft:4,strategy:3,risk:3,pressure:3,craft:4,consistency:4,charisma:3,tyre:3,wet:3,comms:3},
    vet:{pace:5,racecraft:4,strategy:3,risk:3,pressure:4,craft:4,consistency:4,charisma:4,tyre:3,wet:4,comms:4},
    ros:{pace:4,racecraft:3,strategy:4,risk:2,pressure:4,craft:3,consistency:5,charisma:3,tyre:4,wet:3,comms:4},
    per:{pace:3,racecraft:3,strategy:4,risk:2,pressure:4,craft:3,consistency:4,charisma:3,tyre:5,wet:3,comms:3},
    mag:{pace:3,racecraft:4,strategy:2,risk:4,pressure:3,craft:3,consistency:3,charisma:3,tyre:2,wet:3,comms:2},
    ric:{pace:4,racecraft:4,strategy:3,risk:3,pressure:3,craft:4,consistency:3,charisma:5,tyre:3,wet:3,comms:4},
    bot:{pace:4,racecraft:3,strategy:3,risk:2,pressure:4,craft:3,consistency:5,charisma:2,tyre:4,wet:3,comms:3},
    zhou:{pace:3,racecraft:3,strategy:3,risk:2,pressure:3,craft:3,consistency:4,charisma:3,tyre:3,wet:3,comms:3},
    col:{pace:4,racecraft:3,strategy:2,risk:4,pressure:3,craft:4,consistency:3,charisma:3,tyre:3,wet:3,comms:3},
    lin:{pace:4,racecraft:3,strategy:2,risk:4,pressure:3,craft:4,consistency:3,charisma:3,tyre:3,wet:3,comms:3},
  };

  // ===== é¢˜ç›®ï¼ˆ16é¢˜ï¼‰=====
  // add é‡Œçš„æ•°è¶Šå¤§ï¼Œä»£è¡¨ä½ æ›´åå¥½è¯¥ç‰¹è´¨
  const questions = [
    { q:"èµ·è·‘ç¯ç­çš„ä¸€ç¬é—´ï¼Œä½ æ›´åƒå“ªç§ï¼Ÿ", a:[
      {t:"å…ˆç¨³ä½é¿å…æ„å¤–ï¼Œå†æ‰¾æœºä¼š", add:{consistency:2,strategy:1,pressure:1}},
      {t:"ç›´æ¥æŠ¢å†…çº¿ï¼Œæˆè´¥åœ¨æ­¤ä¸€ä¸¾", add:{racecraft:2,risk:2,pace:1}},
      {t:"è§‚å¯Ÿä¸¤ä¾§åŠ¨å‘ï¼Œæ‰¾ç©ºæ¡£ä¸€å£æ°”ç©¿è¿‡å»", add:{craft:2,racecraft:1,pressure:1}},
      {t:"ç¬¬ä¸€å¼¯å°±æ˜¯æˆ‘çš„èˆå°ï¼Œæé™åˆ¹è½¦", add:{pace:2,risk:1,craft:1}},
    ]},
    { q:"é‡åˆ°æ…¢è½¦æŒ¡è·¯ï¼Œä½ ä¼šæ€ä¹ˆåšï¼Ÿ", a:[
      {t:"è€å¿ƒç­‰ä»–å¤±è¯¯ï¼Œä¸€å‡»è‡´å‘½", add:{strategy:2,craft:1,pressure:1}},
      {t:"é€¼è¿«ä»–é˜²å®ˆï¼Œåˆ¶é€ ç ´ç»½", add:{racecraft:2,risk:1,pressure:1}},
      {t:"ç”¨æ›´ä¼˜è·¯çº¿/å‡ºå¼¯é€Ÿåº¦å®Œæˆè¶…è¶Š", add:{strategy:1,craft:2,consistency:1}},
      {t:"æˆ‘èƒ½åœ¨ä¸€ä¸ªå¼¯é‡Œå®Œæˆè¶…è½¦", add:{pace:1,racecraft:2,risk:1}},
    ]},
    { q:"æ’ä½èµ›æœ€åä¸€åœˆï¼Œä½ ä¼šæ€ä¹ˆè·‘ï¼Ÿ", a:[
      {t:"ä¿å®ˆä¸€ç‚¹ï¼šå¹²å‡€ä¸€åœˆæœ€é‡è¦", add:{consistency:2,pressure:1}},
      {t:"æ¨åˆ°æé™ï¼šè¦ä¹ˆç´«åœˆè¦ä¹ˆæ²¡äº†", add:{pace:3,risk:1}},
      {t:"ç»†æŠ åˆ¹è½¦ç‚¹å’Œç‰µå¼•ï¼Œç¨³ç¨³æŒ¤å‡ºé€Ÿåº¦", add:{pace:2,craft:1,consistency:1}},
      {t:"çœ‹é£å‘/æ¸©åº¦/å‰è½¦é—´éš™ï¼Œæ‰¾æœ€å¥½çš„çª—å£", add:{strategy:2,pressure:1}},
    ]},
    { q:"å›¢é˜Ÿå‘Šè¯‰ä½ ï¼šç­–ç•¥æœ‰ä¸¤å¥—ï¼Œä½ æ›´åå‘ï¼Ÿ", a:[
      {t:"ä¿å®ˆä½†ç¨³ï¼šå…ˆæ‹¿åˆ°ç¡®å®šæ€§ç§¯åˆ†", add:{consistency:2,strategy:2}},
      {t:"æ¿€è¿›ï¼šèµŒä¸€æ¬¡å®‰å…¨è½¦/é›¨æ¥", add:{risk:2,strategy:1,craft:1}},
      {t:"çœ‹æ•°æ®ï¼šè½®èƒã€å¯¹æ‰‹èŠ‚å¥å†å†³å®š", add:{strategy:2,pressure:1,consistency:1}},
      {t:"æ¸…æ™°çš„ Plan Aï¼šä¸€è·¯å†²åˆ°æœ€å‰", add:{pace:1,racecraft:2,pressure:1}},
    ]},
    { q:"ä½ æ›´æ“…é•¿å“ªç§èµ›æ®µï¼Ÿ", a:[
      {t:"é•¿è·ç¦»ç¨³å®šè¾“å‡ºï¼ŒèŠ‚å¥åƒé’Ÿè¡¨", add:{consistency:3,tyre:1}},
      {t:"è½®å¯¹è½®å¯¹æŠ—ï¼Œè°éƒ½åˆ«æƒ³è½»æ¾è¿‡æˆ‘", add:{racecraft:3,risk:1}},
      {t:"æ’ä½ä¸€åœˆï¼šæŠŠæé™åœˆè·‘å‡ºæ¥", add:{pace:3,pressure:1}},
      {t:"æ··ä¹±å±€ï¼šé›¨æˆ˜/å®‰å…¨è½¦æˆ‘æ›´å…´å¥‹", add:{craft:2,risk:1,strategy:1,wet:1}},
    ]},
    { q:"å‹åŠ›æ¥ä¸´æ—¶ï¼Œä½ çš„ååº”æ›´åƒï¼Ÿ", a:[
      {t:"è¶Šç´§å¼ è¶Šæ¸…æ™°ï¼šæŠŠæ¯ä¸ªæ­¥éª¤åšå¯¹", add:{pressure:2,consistency:2}},
      {t:"æˆ‘ä¼šæ›´å‡¶ï¼šæœºä¼šåœ¨å‹åŠ›é‡Œ", add:{pressure:1,risk:2,racecraft:1}},
      {t:"å…ˆç¨³ä½èŠ‚å¥ï¼Œå†é€æ­¥æé€Ÿ", add:{consistency:2,tyre:1,pressure:1}},
      {t:"å…ˆè¯»å±€ï¼šææ¸…æ¥šå¯¹æ‰‹æƒ³å¹²å˜›", add:{craft:2,strategy:1,pressure:1}},
    ]},
    { q:"ä½ å¯¹â€œé£é™©â€çš„æ€åº¦æ›´åƒï¼Ÿ", a:[
      {t:"é£é™©å¯æ§æ‰å†’ï¼šå…ˆç®—æ¸…æ¥š", add:{strategy:2,consistency:2}},
      {t:"è¯¥æ‹¼å°±æ‹¼ï¼šæœºä¼šç¨çºµå³é€", add:{risk:2,racecraft:1,pace:1}},
      {t:"çœ‹æ„Ÿè§‰ï¼šé‚£ä¸€åˆ»å¯¹äº†å°±å†²", add:{pace:2,risk:1,charisma:1}},
      {t:"æˆ‘è¦è®©é£é™©å˜æˆåˆ«äººçš„è´Ÿæ‹…", add:{craft:2,racecraft:1,risk:1}},
    ]},
    { q:"è½®èƒå¼€å§‹æ‰æ€§èƒ½æ—¶ï¼Œä½ ä¼šï¼Ÿ", a:[
      {t:"å…ˆä¿èƒï¼šè®©èŠ‚å¥ç¨³å®šä¸‹æ¥", add:{tyre:3,consistency:1}},
      {t:"ç»§ç»­é€¼ï¼šè¶ç°åœ¨æŠŠä½ç½®æ‰“å‡ºæ¥", add:{risk:1,racecraft:2,pace:1}},
      {t:"æ‰¾ç©ºéš™æ¢ç­–ç•¥ï¼šæå‰/å»¶åè¿›ç«™", add:{strategy:3}},
      {t:"é æ›´ç»†è…»çš„æ²¹é—¨/ç‰µå¼•å‡å°‘æ‰“æ»‘", add:{craft:2,tyre:2}},
    ]},
    { q:"é›¨æˆ˜/ä½æŠ“åœ°ï¼Œä½ æ›´åƒå“ªç§ï¼Ÿ", a:[
      {t:"æ›´è°¨æ…ï¼šå…ˆä¿è¯ä¸çŠ¯é”™", add:{consistency:2,pressure:1}},
      {t:"æ›´å…´å¥‹ï¼šè¿™æ˜¯æˆ‘æ‹‰å¼€å·®è·çš„æ—¶åˆ»", add:{wet:3,craft:1,risk:1}},
      {t:"æ›´ä¾èµ–æ„Ÿè§‰ï¼šæ‰¾åˆ°æŠ“åœ°è¾¹ç•Œ", add:{wet:2,craft:2}},
      {t:"æ›´ä¾èµ–ä¿¡æ¯ï¼šæ ¹æ®æ•°æ®è°ƒæ•´é©¾é©¶", add:{strategy:2,wet:1,consistency:1}},
    ]},
    { q:"é˜²å®ˆæ—¶ä½ çš„é£æ ¼æ›´åƒï¼Ÿ", a:[
      {t:"ä¸€æ¡çº¿å®ˆåˆ°åº•ï¼šä¸ç»™ä½ ç¼", add:{racecraft:2,pressure:1,consistency:1}},
      {t:"å¼ºç¡¬å¡ä½ï¼šä½ æ¥æˆ‘å°±é¡¶ä½", add:{racecraft:2,risk:1}},
      {t:"å¼•ä½ èµ°è„çº¿ï¼šè®©ä½ å‡ºå¼¯æ…¢", add:{craft:2,strategy:1}},
      {t:"é˜²å®ˆä¸æ˜¯ç›®çš„ï¼šæˆ‘æ›´æƒ³æ—©ç‚¹åå‡»", add:{pace:1,risk:1,racecraft:1}},
    ]},
    { q:"ä½ æ›´æ„¿æ„æ€ä¹ˆæ²Ÿé€šï¼ˆæ— çº¿ç”µï¼‰ï¼Ÿ", a:[
      {t:"ä¿¡æ¯è¶Šæ¸…æ¥šè¶Šå¥½ï¼šç®€æ´ã€å¯æ‰§è¡Œ", add:{comms:3,consistency:1}},
      {t:"æˆ‘è¦å¯¹æ‰‹ä¿¡æ¯/çª—å£ï¼šç»™æˆ‘æ•°æ®", add:{comms:2,strategy:2}},
      {t:"å°‘è¯´è¯ï¼šæˆ‘è‡ªå·±è§£å†³", add:{pressure:1,consistency:1}},
      {t:"æƒ…ç»ªä¹Ÿä¼šè¡¨è¾¾ï¼šè®©å›¢é˜Ÿè·Ÿä¸ŠèŠ‚å¥", add:{charisma:2,comms:1}},
    ]},
    { q:"å¦‚æœè½¦ä¸é¡ºæ‰‹ï¼Œä½ ä¼šï¼Ÿ", a:[
      {t:"å…ˆé€‚åº”ï¼šæŠŠèƒ½æ‹¿çš„åˆ†æ‹¿åˆ°", add:{consistency:3,pressure:1}},
      {t:"è¦æ±‚ç«‹åˆ»æ”¹è®¾å®šï¼šæˆ‘è¦æ›´å¿«", add:{comms:2,pace:2,risk:1}},
      {t:"æ”¹å˜é©¾é©¶æ–¹å¼ï¼šç”¨æŠ€æœ¯è¡¥è½¦", add:{craft:3,pressure:1}},
      {t:"æ¢æ‰“æ³•ï¼šç”¨ç­–ç•¥æŠŠå±€åŠ¿æ°å›æ¥", add:{strategy:3,comms:1}},
    ]},
    { q:"ä½ æ›´å–œæ¬¢æ€æ ·çš„â€œèµ¢æ³•â€ï¼Ÿ", a:[
      {t:"å…¨ç¨‹æŒæ§ï¼šå¯¹æ‰‹çœ‹ä¸åˆ°æœºä¼š", add:{consistency:2,pressure:1,pace:1}},
      {t:"æœ€åå‡ åœˆåæ€ï¼šä¸€å‡»è‡´å‘½", add:{pressure:2,racecraft:1,craft:1}},
      {t:"ç­–ç•¥åˆ¶èƒœï¼šç”¨è„‘å­èµ¢", add:{strategy:3,consistency:1}},
      {t:"ç¡¬åˆšèµ¢ä¸‹æ¥ï¼šè½®å¯¹è½®æŠŠä»–åƒæ‰", add:{racecraft:3,risk:1}},
    ]},
    { q:"ä½ æ›´åœ¨æ„å“ªä»¶äº‹ï¼Ÿ", a:[
      {t:"æœ€é«˜ä¸Šé™ï¼šæˆ‘æƒ³æˆä¸ºæœ€å¿«çš„", add:{pace:3}},
      {t:"èƒœç‡ï¼šç¨³å®šæ‹¿ç»“æœæœ€é‡è¦", add:{consistency:3,tyre:1}},
      {t:"æŒæ§æ¯”èµ›ï¼šæˆ‘æƒ³æŠŠåˆ«äººå¸¦è¿›æˆ‘çš„èŠ‚å¥", add:{strategy:2,pressure:1,comms:1}},
      {t:"å­˜åœ¨æ„Ÿï¼šæˆ‘æƒ³è®©äººè®°ä½æˆ‘çš„é£æ ¼", add:{charisma:3,risk:1}},
    ]},
    { q:"å…³é”®è¶…è½¦çª—å£å‡ºç°ï¼Œä½ ä¼šï¼Ÿ", a:[
      {t:"åªè¦ 60% æŠŠæ¡ä¹Ÿå†²", add:{risk:2,racecraft:1}},
      {t:"ç­‰åˆ° 90% æŠŠæ¡å†å‡ºæ‰‹", add:{strategy:1,consistency:2}},
      {t:"å…ˆé€ åŠ¿ï¼šé€¼å‡ºå¯¹æ–¹é”™è¯¯", add:{craft:2,racecraft:1}},
      {t:"æ‹¼å‡ºå¼¯é€Ÿåº¦ï¼šä¸‹ä¸€æ¡ç›´é“åƒæ‰", add:{pace:2,strategy:1}},
    ]},
    { q:"æœ€åä¸€é¢˜ï¼šä½ æ›´æƒ³è¢«åˆ«äººæ€ä¹ˆè¯„ä»·ï¼Ÿ", a:[
      {t:"â€œä»–çœŸçš„å¤ªå¿«äº†â€", add:{pace:3}},
      {t:"â€œä»–æ€»èƒ½èµ¢åœ¨å…³é”®æ—¶åˆ»â€", add:{pressure:3,consistency:1}},
      {t:"â€œä»–æ°¸è¿œæœ‰åŠæ³•â€", add:{craft:2,strategy:2}},
      {t:"â€œä»–åˆå¼ºåˆæœ‰æ°”åœºâ€", add:{charisma:3,racecraft:1}},
    ]},
  ];

  // ===== DOM =====
  const status = document.getElementById('status');
  const title = document.getElementById('title');
  const subtitle = document.getElementById('subtitle');
  const quizArea = document.getElementById('quizArea');
  const bar = document.getElementById('bar');
  const progress = document.getElementById('progress');
  const startBtn = document.getElementById('startBtn');
  const restartBtn = document.getElementById('restartBtn');
  const shareBtn = document.getElementById('shareBtn');

  // ===== State =====
  let idx = -1;
  let finished = false;

  // ä½ çš„å€¾å‘å‘é‡ï¼ˆæ ¸å¿ƒæ”¹åŠ¨ï¼šå…ˆç´¯è®¡â€œä½ â€çš„ traitsï¼‰
  const U = Object.fromEntries(traits.map(t => [t, 0]));

  function reset() {
    for (const t of traits) U[t] = 0;
    idx = -1;
    finished = false;
    quizArea.innerHTML = "";
    title.textContent = "ç‚¹å‡»å¼€å§‹ï¼Œæµ‹æµ‹ä½ çš„â€œè½¦æ‰‹æ°”è´¨â€ ğŸ";
    subtitle.textContent = `ä¸€å…± ${questions.length} é¢˜ï¼Œé€‰ä½ æœ€åƒçš„ååº”ã€‚ç»“æœä»…ä¾›å¨±ä¹ã€‚`;
    status.textContent = "æœªå¼€å§‹";
    bar.style.width = "0%";
    progress.textContent = `0/${questions.length}`;
    startBtn.style.display = "";
    restartBtn.style.display = "none";
    shareBtn.style.display = "none";
  }

  function start() {
    if (finished) return;
    if (idx === -1) idx = 0;
    status.textContent = "ç­”é¢˜ä¸­";
    startBtn.style.display = "none";
    renderQuestion();
  }

  function renderQuestion() {
    const q = questions[idx];
    title.textContent = "Q" + (idx+1) + " / " + questions.length;
    subtitle.textContent = q.q;

    const pct = Math.round((idx / questions.length) * 100);
    bar.style.width = pct + "%";
    progress.textContent = `${idx}/${questions.length}`;

    quizArea.innerHTML = "";
    const box = document.createElement('div');
    box.className = "answers";

    q.a.forEach((opt, i) => {
      const btn = document.createElement('button');
      btn.className = "opt";
      btn.innerHTML = `<b>${i+1}.</b> ${opt.t}`;
      btn.addEventListener('click', () => choose(i));
      box.appendChild(btn);
    });

    quizArea.appendChild(box);
  }

  function addToUserVector(add) {
    for (const [k,v] of Object.entries(add)) {
      if (U[k] != null) U[k] += v;
    }
  }

  function norm(vec) {
    let s = 0;
    for (const t of traits) s += (vec[t] || 0) * (vec[t] || 0);
    return Math.sqrt(s) || 1;
  }

  function cosineSimilarity(userVec, driverVec) {
    // æ ¸å¿ƒï¼šç›¸ä¼¼åº¦ = dot(u, p) / (||u|| * ||p||)
    let dot = 0;
    for (const t of traits) dot += (userVec[t] || 0) * (driverVec[t] || 0);
    return dot / (norm(userVec) * norm(driverVec));
  }

  function choose(i) {
    const q = questions[idx];
    const opt = q.a[i];
    addToUserVector(opt.add);

    idx++;
    if (idx >= questions.length) finish();
    else renderQuestion();
  }

  function finish() {
    finished = true;
    status.textContent = "å·²å®Œæˆ";
    bar.style.width = "100%";
    progress.textContent = `${questions.length}/${questions.length}`;

    const scored = allDrivers
      .map(d => {
        const p = P[d.id];
        if (!p) return { ...d, sim: -999 };
        return { ...d, sim: cosineSimilarity(U, p) };
      })
      .sort((a,b)=>b.sim-a.sim);

    const top = scored[0], top2 = scored[1], top3 = scored[2];

    title.textContent = "ä½ çš„ç»“æœï¼š";
    subtitle.textContent = `ä½ æœ€åƒï¼š${top.name}`;

    // æ˜¾ç¤ºä½ çš„â€œTop traitsâ€ï¼ˆè®©ç»“æœæ›´åƒâ€œå‡†â€ï¼‰
    const userTopTraits = traits
      .map(t => ({t, v: U[t]}))
      .sort((a,b)=>b.v-a.v)
      .slice(0,4)
      .filter(x=>x.v>0)
      .map(x=>x.t);

    const traitCN = {
      pace:"é€Ÿåº¦/å†²åˆº", racecraft:"å¯¹æŠ—", strategy:"ç­–ç•¥", risk:"å†’é™©", pressure:"æŠ—å‹",
      craft:"æŠ€æœ¯ç»†è…»", consistency:"ç¨³å®š", charisma:"æ°”åœº/å­˜åœ¨æ„Ÿ", tyre:"è½®èƒç®¡ç†", wet:"é›¨æˆ˜", comms:"æ²Ÿé€š"
    };

    quizArea.innerHTML = `
      <div class="resultCard">
        <div class="badge">${top.emoji || "ğŸ"}</div>
        <div>
          <p class="rtitle">${top.name}</p>
          <p class="rdesc">${top.desc || "ä½ å±äºå¾ˆæœ‰ç‰¹ç‚¹çš„è½¦æ‰‹ç±»å‹ï¼šæœ‰è‡ªå·±çš„èŠ‚å¥å’Œæ‰“æ³•ã€‚"} </p>
          <div class="tags">
            ${(top.tags || []).map(t=>`<span class="tag">${t}</span>`).join("")}
          </div>
          <div class="mini">
            ä½ çš„å€¾å‘ï¼š${(userTopTraits.length? userTopTraits.map(t=>traitCN[t]||t).join(" / ") : "ï¼ˆæœªå½¢æˆæ˜æ˜¾åå¥½ï¼‰")}<br/>
            Top3ï¼š${top.name.split(" ")[0]} / ${top2.name.split(" ")[0]} / ${top3.name.split(" ")[0]}
          </div>
        </div>
      </div>
    `;

    const shareText =
      `ğŸ æˆ‘æµ‹å‡ºæ¥æ›´åƒã€Œ${top.name}ã€ï¼\nTop3ï¼š${top.name.split(" ")[0]} / ${top2.name.split(" ")[0]} / ${top3.name.split(" ")[0]}\næ¥æµ‹æµ‹ä½ æ˜¯å“ªä½è½¦æ‰‹ï¼š${location.href}`;
    shareBtn.dataset.share = shareText;

    restartBtn.style.display = "";
    shareBtn.style.display = "";
  }

  // å¿«æ·é”® 1-4
  window.addEventListener('keydown', (e) => {
    if (idx < 0 || finished) {
      if (e.code === "Space") start();
      return;
    }
    const n = Number(e.key);
    if (n>=1 && n<=4) choose(n-1);
  });

  startBtn.addEventListener('click', start);
  restartBtn.addEventListener('click', reset);
  shareBtn.addEventListener('click', async () => {
    const text = shareBtn.dataset.share || "";
    try {
      if (navigator.share) {
        await navigator.share({ text, title: "æµ‹æµ‹ä½ æ˜¯å“ªä½ F1 è½¦æ‰‹ï¼ˆ37äººç‰ˆ v2ï¼‰" });
      } else {
        await navigator.clipboard.writeText(text);
        shareBtn.textContent = "å·²å¤åˆ¶ âœ…";
        setTimeout(()=>shareBtn.textContent="å¤åˆ¶ç»“æœæ–‡æ¡ˆ", 1200);
      }
    } catch {
      try {
        await navigator.clipboard.writeText(text);
        shareBtn.textContent = "å·²å¤åˆ¶ âœ…";
        setTimeout(()=>shareBtn.textContent="å¤åˆ¶ç»“æœæ–‡æ¡ˆ", 1200);
      } catch {}
    }
  });

  reset();
})();
</script>
</body>
</html>
