<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
  <title>æµ‹æµ‹ä½ æ˜¯å“ªä½ F1 è½¦æ‰‹</title>
  <style>
    :root{
      --bg:#070b18; --fg:#eaf0ff; --muted:rgba(255,255,255,.72);
      --card:rgba(255,255,255,.06); --bd:rgba(255,255,255,.16);
      --a:#ff3b3b; --b:#38bdf8; --c:#a78bfa; --ok:#34d399;
    }
    html,body{height:100%;margin:0}
    body{
      display:flex;align-items:center;justify-content:center;
      background: radial-gradient(900px 520px at 50% 0%, #1b2450 0%, var(--bg) 60%);
      color:var(--fg);
      font-family: ui-sans-serif,system-ui,-apple-system,"Segoe UI",Arial;
      padding:18px;
    }
    .wrap{width:min(920px, 96vw)}
    .top{display:flex;gap:10px;align-items:center;justify-content:space-between;flex-wrap:wrap;margin-bottom:12px}
    .brand{
      display:flex;gap:10px;align-items:center;font-weight:900;letter-spacing:.2px
    }
    .dot{width:10px;height:10px;border-radius:999px;background:linear-gradient(90deg,var(--a),var(--b))}
    .pill{
      border:1px solid var(--bd); background:var(--card);
      padding:8px 10px;border-radius:999px;font-size:14px;
      backdrop-filter: blur(8px);
    }
    .grid{
      display:grid;grid-template-columns: 1.05fr .95fr; gap:14px;
    }
    @media (max-width: 860px){ .grid{grid-template-columns:1fr} }
    .panel{
      border:1px solid var(--bd); background:var(--card);
      border-radius:16px; padding:14px;
      box-shadow:0 18px 55px rgba(0,0,0,.45);
    }
    h1{font-size:20px;margin:0 0 6px 0}
    .sub{color:var(--muted);font-size:14px;line-height:1.6;margin:0 0 12px 0}
    .qhead{display:flex;align-items:flex-start;justify-content:space-between;gap:10px;margin-bottom:10px}
    .qnum{font-weight:800}
    .bar{
      height:10px;border-radius:999px;background:rgba(255,255,255,.10);
      border:1px solid rgba(255,255,255,.12); overflow:hidden; margin:10px 0 2px;
    }
    .bar > div{height:100%;width:0%;background:linear-gradient(90deg,var(--b),var(--c))}
    .small{font-size:12px;color:var(--muted)}
    .answers{display:grid;gap:10px;margin-top:12px}
    button.opt{
      text-align:left; width:100%;
      border:1px solid rgba(255,255,255,.18);
      background:rgba(255,255,255,.05);
      color:var(--fg); padding:12px 12px;border-radius:12px;
      cursor:pointer; font-weight:650; line-height:1.3;
      transition: transform .05s ease, background .12s ease, border-color .12s ease;
      touch-action: manipulation;
    }
    button.opt:hover{background:rgba(56,189,248,.10); border-color:rgba(56,189,248,.35)}
    button.opt:active{transform:scale(.99)}
    .row{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px}
    button.action{
      border:1px solid rgba(255,255,255,.20);
      background:rgba(56,189,248,.14);
      color:var(--fg); padding:10px 12px;border-radius:12px;
      cursor:pointer;font-weight:800
    }
    button.action.secondary{
      background:rgba(255,255,255,.06);
    }
    .resultCard{
      display:flex;gap:12px;align-items:flex-start;
      border:1px solid rgba(255,255,255,.18);
      background:rgba(0,0,0,.18);
      border-radius:14px;padding:12px;margin-top:12px;
    }
    .badge{
      min-width:62px;height:62px;border-radius:16px;
      background:linear-gradient(135deg,rgba(255,59,59,.95),rgba(56,189,248,.75));
      display:flex;align-items:center;justify-content:center;
      font-size:26px;font-weight:1000;
      box-shadow:0 10px 22px rgba(0,0,0,.35);
    }
    .rtitle{font-size:18px;font-weight:950;margin:0}
    .rdesc{margin:6px 0 0 0;color:var(--muted);line-height:1.55}
    .tags{display:flex;gap:8px;flex-wrap:wrap;margin-top:10px}
    .tag{font-size:12px;padding:5px 8px;border-radius:999px;border:1px solid rgba(255,255,255,.16);background:rgba(255,255,255,.06)}
    .mini{
      margin-top:10px;color:var(--muted);font-size:13px;line-height:1.55
    }
    .leader{
      display:grid;gap:10px;margin-top:8px
    }
    .scoreRow{
      display:flex;justify-content:space-between;gap:10px;align-items:center;
      padding:10px 10px;border-radius:12px;background:rgba(255,255,255,.04);
      border:1px solid rgba(255,255,255,.10)
    }
    .name{font-weight:900}
    .meter{
      width:42%;min-width:160px;height:10px;border-radius:999px;background:rgba(255,255,255,.10);
      overflow:hidden;border:1px solid rgba(255,255,255,.12)
    }
    .meter>div{height:100%;width:0%}
    .foot{margin-top:10px;font-size:12px;color:rgba(255,255,255,.55)}
    .kbd{padding:1px 6px;border-radius:6px;border:1px solid rgba(255,255,255,.25);background:rgba(255,255,255,.08)}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="top">
      <div class="brand"><span class="dot"></span>F1 å°æ¸¸æˆï¼šæµ‹æµ‹ä½ æ˜¯å“ªä½è½¦æ‰‹</div>
      <div class="pill" id="status">æœªå¼€å§‹</div>
    </div>

    <div class="grid">
      <div class="panel">
        <h1 id="title">ç‚¹å‡»å¼€å§‹ï¼Œæµ‹æµ‹ä½ çš„â€œè½¦æ‰‹æ°”è´¨â€ ğŸ</h1>
        <p class="sub" id="subtitle">ä¸€å…± 8 é¢˜ï¼Œé€‰ä½ æœ€åƒçš„ååº”ã€‚ç»“æœåªæ˜¯å¨±ä¹å‘~</p>

        <div class="bar" aria-label="è¿›åº¦æ¡"><div id="bar"></div></div>
        <div class="small"><span id="progress">0/8</span></div>

        <div id="quizArea" style="margin-top:10px"></div>

        <div class="row">
          <button class="action" id="startBtn">å¼€å§‹æµ‹è¯•</button>
          <button class="action secondary" id="restartBtn" style="display:none">å†æµ‹ä¸€æ¬¡</button>
          <button class="action secondary" id="shareBtn" style="display:none">å¤åˆ¶ç»“æœæ–‡æ¡ˆ</button>
        </div>

        <div class="foot">æ“ä½œæç¤ºï¼šç”µè„‘å¯ç”¨ <span class="kbd">1-4</span> å¿«é€‰ç­”æ¡ˆã€‚</div>
      </div>

      <div class="panel">
        <h1>å®æ—¶å€¾å‘</h1>
        <p class="sub">ä½ æ¯æ¬¡é€‰æ‹©éƒ½ä¼šç»™ä¸åŒâ€œè½¦æ‰‹ç±»å‹â€åŠ åˆ†ã€‚è¿™é‡Œä¼šå®æ—¶æ˜¾ç¤ºå½“å‰å‰ 4 åã€‚</p>
        <div class="leader" id="leader"></div>
        <div class="mini" id="miniTip">æç¤ºï¼šå¦‚æœä½ æ›´æƒ³æµ‹æŸä½è½¦æ‰‹ï¼ˆæ¯”å¦‚â€œæ›´åƒå‹’å…‹è±å°”è¿˜æ˜¯è¯ºé‡Œæ–¯â€ï¼‰ï¼Œæˆ‘ä¹Ÿèƒ½åšæˆå¯¹æ¯”ç‰ˆã€‚</div>
      </div>
    </div>
  </div>

<script>
(() => {
  // è½¦æ‰‹â€œç±»å‹â€ï¼ˆç”¨é£æ ¼/æ€§æ ¼æ˜ å°„åˆ°ä¸€äº›çŸ¥åè½¦æ‰‹çš„å…¬ä¼—å°è±¡ï¼›å¨±ä¹å‘ï¼‰
  const drivers = [
    { id:"ver", name:"ç»´æ–¯å¡”æ½˜ Max", emoji:"ğŸ¦", tags:["æè‡´è¿›æ”»","å†·é™è®¡ç®—","èƒœè´Ÿæ¬²çˆ†è¡¨"], color:"linear-gradient(135deg,#ff3b3b,#f97316)",
      desc:"ä½ å±äºâ€œæƒ³èµ¢å°±ç°åœ¨èµ¢â€çš„ç±»å‹ï¼šå‡ºæ‰‹æœæ–­ã€åˆ¤æ–­å¿«ã€æŠ—å‹å¼ºï¼Œç›®æ ‡æ„Ÿç‰¹åˆ«æ¸…æ™°ã€‚"},
    { id:"ham", name:"æ±‰å¯†å°”é¡¿ Lewis", emoji:"ğŸ‘‘", tags:["å¤§å±€è§‚","ç¨³å®šè¾“å‡º","å…³é”®åœˆçˆ†å‘"], color:"linear-gradient(135deg,#38bdf8,#a78bfa)",
      desc:"ä½ æ˜¯â€œå…³é”®æ—¶åˆ»æ›´å¼ºâ€çš„ç±»å‹ï¼šèŠ‚å¥ç¨³ã€ç­–ç•¥å¼ºï¼Œè¶Šåˆ°é‡è¦èŠ‚ç‚¹è¶Šèƒ½æ‹‰æ»¡è¡¨ç°ã€‚"},
    { id:"alo", name:"é˜¿éš†ç´¢ Fernando", emoji:"ğŸ¦Š", tags:["è€è¾£é˜…è¯»","æˆ˜æœ¯å¤§å¸ˆ","æŠ“æœºä¼š"], color:"linear-gradient(135deg,#22c55e,#38bdf8)",
      desc:"ä½ æ“…é•¿è¯»å±€ï¼šæ‡‚å¾—åœ¨å¤æ‚å±€é¢é‡Œæ‰¾çªç ´å£ï¼Œç”¨æœ€å°ä»£ä»·æ¢æœ€å¤§æ”¶ç›Šã€‚"},
    { id:"lec", name:"å‹’å…‹è±å°” Charles", emoji:"ğŸ§Š", tags:["å¤©èµ‹é€Ÿåº¦","å®Œç¾ä¸»ä¹‰","è¿½æ±‚æé™åœˆ"], color:"linear-gradient(135deg,#ef4444,#38bdf8)",
      desc:"ä½ åƒâ€œå¤©èµ‹å‹é€‰æ‰‹â€ï¼šå†²åˆºæ—¶å¾ˆé”‹åˆ©ï¼Œè¿½æ±‚æ¼‚äº®çš„ä¸€å‡»ï¼Œä½†ä¹Ÿä¼šå¯¹è‡ªå·±è¦æ±‚å¾ˆä¸¥ã€‚"},
    { id:"nor", name:"è¯ºé‡Œæ–¯ Lando", emoji:"ğŸ˜„", tags:["å¿«ä¹ä½†ç‹ ","ååº”å¿«","å›¢é˜Ÿæ°›å›´ç‹"], color:"linear-gradient(135deg,#f59e0b,#38bdf8)",
      desc:"ä½ æ˜¯â€œå¼€æœ—ç‹ è§’è‰²â€ï¼šè¡¨é¢è½»æ¾ï¼ŒçœŸä¸Šå¼ºåº¦æ—¶ä¸€ç‚¹ä¸å«ç³Šï¼ŒèŠ‚å¥å˜åŒ–ä¹Ÿå¾ˆçµæ´»ã€‚"},
    { id:"sai", name:"å¡æ©æ–¯ Carlos", emoji:"ğŸ§ ", tags:["ç­–ç•¥æ§","ç¨³ä¸­æ±‚èƒœ","æ‰§è¡ŒåŠ›"], color:"linear-gradient(135deg,#fb7185,#a78bfa)",
      desc:"ä½ å±äºâ€œä¼šåšé¢˜çš„è½¦æ‰‹â€ï¼šæ“…é•¿è§„åˆ’å’Œæ‰§è¡Œï¼Œé èªæ˜çš„é€‰æ‹©æŠŠèƒœç‡ä¸€ç‚¹ç‚¹å †èµ·æ¥ã€‚"},
  ];

  // é¢˜ç›®ï¼šæ¯ä¸ªé€‰é¡¹ç»™ä¸åŒ driver åŠ åˆ†
  const questions = [
    {
      q:"èµ·è·‘ç¯ç­çš„ä¸€ç¬é—´ï¼Œä½ æ›´åƒå“ªç§ï¼Ÿ",
      a:[
        { t:"å…ˆç¨³ä½é¿å…æ„å¤–ï¼Œå†æ‰¾æœºä¼š", w:{ham:2, sai:2, alo:1} },
        { t:"ç›´æ¥æŠ¢å†…çº¿ï¼Œæˆè´¥åœ¨æ­¤ä¸€ä¸¾", w:{ver:3, lec:1} },
        { t:"è§‚å¯Ÿä¸¤ä¾§åŠ¨å‘ï¼Œæ‰¾ç©ºæ¡£ä¸€å£æ°”ç©¿è¿‡å»", w:{alo:2, nor:2} },
        { t:"ç¬¬ä¸€å¼¯å°±æ˜¯æˆ‘çš„èˆå°ï¼Œæé™åˆ¹è½¦", w:{lec:3, ver:1} },
      ]
    },
    {
      q:"é‡åˆ°æ…¢è½¦æŒ¡è·¯ï¼Œä½ ä¼šæ€ä¹ˆåšï¼Ÿ",
      a:[
        { t:"è€å¿ƒç­‰ä»–å¤±è¯¯ï¼Œä¸€å‡»è‡´å‘½", w:{alo:3, ham:1} },
        { t:"é€¼è¿«ä»–é˜²å®ˆï¼Œåˆ¶é€ ç ´ç»½", w:{ver:2, nor:2} },
        { t:"ç”¨æ›´ä¼˜è·¯çº¿/æ›´å¥½å‡ºå¼¯é€Ÿåº¦å®Œæˆè¶…è¶Š", w:{sai:3, ham:1} },
        { t:"æˆ‘èƒ½åœ¨ä¸€ä¸ªå¼¯é‡Œå®Œæˆè¶…è½¦", w:{lec:2, ver:2} },
      ]
    },
    {
      q:"å›¢é˜Ÿå‘Šè¯‰ä½ ï¼šç­–ç•¥æœ‰ä¸¤å¥—ï¼Œä½ æ›´åå‘ï¼Ÿ",
      a:[
        { t:"ä¿å®ˆä½†ç¨³ï¼šå…ˆæ‹¿åˆ°ç¡®å®šæ€§ç§¯åˆ†", w:{ham:2, sai:3} },
        { t:"æ¿€è¿›ï¼šèµŒä¸€æ¬¡å®‰å…¨è½¦/é›¨æ¥", w:{alo:3, ver:1} },
        { t:"çœ‹æ•°æ®ï¼šè½®èƒã€é£å‘ã€å¯¹æ‰‹èŠ‚å¥å†å†³å®š", w:{sai:2, ham:2, alo:1} },
        { t:"æˆ‘æƒ³è¦æ¸…æ™°çš„ Plan Aï¼šå†²åˆºåˆ°æœ€å‰", w:{ver:2, lec:2} },
      ]
    },
    {
      q:"ä½ æ›´æ“…é•¿å“ªç§èµ›æ®µï¼Ÿ",
      a:[
        { t:"é•¿è·ç¦»ç¨³å®šè¾“å‡ºï¼ŒèŠ‚å¥åƒé’Ÿè¡¨", w:{ham:3, sai:2} },
        { t:"å¯¹æŠ—ï¼šè½®å¯¹è½®æˆ‘ä¸æ€•", w:{ver:3, alo:2} },
        { t:"æ’ä½ï¼šä¸€åœˆå†³å®šä¸€åˆ‡", w:{lec:3, nor:1} },
        { t:"æ··ä¹±å±€ï¼šé›¨æˆ˜/å®‰å…¨è½¦æˆ‘æ›´å…´å¥‹", w:{alo:3, nor:2} },
      ]
    },
    {
      q:"å‹åŠ›æ¥ä¸´æ—¶ï¼Œä½ çš„ååº”æ›´åƒï¼Ÿ",
      a:[
        { t:"è¶Šç´§å¼ è¶Šæ¸…æ™°ï¼šæŠŠæ¯ä¸ªæ­¥éª¤åšå¯¹", w:{sai:3, ham:2} },
        { t:"æˆ‘ä¼šæ›´å‡¶ï¼šè¦ä¹ˆèµ¢è¦ä¹ˆä¸ç•™é—æ†¾", w:{ver:3, lec:1} },
        { t:"å¿ƒæ€æ”¾æ¾ï¼Œç”¨å¹½é»˜æŠŠè‡ªå·±æ‹‰å›çŠ¶æ€", w:{nor:3, ham:1} },
        { t:"è¯»å±€ï¼šå…ˆææ¸…æ¥šå¯¹æ‰‹æƒ³å¹²å˜›", w:{alo:3, sai:1} },
      ]
    },
    {
      q:"ä½ å¯¹â€œé£é™©â€çš„æ€åº¦æ›´åƒï¼Ÿ",
      a:[
        { t:"é£é™©å¯æ§æ‰å†’ï¼šå…ˆç®—æ¸…æ¥š", w:{sai:3, ham:2} },
        { t:"è¯¥æ‹¼å°±æ‹¼ï¼šæœºä¼šç¨çºµå³é€", w:{ver:3, alo:1} },
        { t:"çœ‹æ„Ÿè§‰ï¼šé‚£ä¸€åˆ»å¯¹äº†å°±å†²", w:{lec:3, nor:1} },
        { t:"æˆ‘è¦è®©é£é™©å˜æˆåˆ«äººçš„è´Ÿæ‹…", w:{alo:2, nor:2, ver:1} },
      ]
    },
    {
      q:"å¦‚æœä½ è¦æå‡æˆç»©ï¼Œä½ ä¼šå…ˆç»ƒï¼Ÿ",
      a:[
        { t:"èµ·è·‘ä¸ç¬¬ä¸€åœˆåˆ¤æ–­", w:{ver:2, alo:2, nor:1} },
        { t:"è½®èƒç®¡ç†ï¼ˆé•¿è·ç¦»èŠ‚å¥ï¼‰", w:{ham:3, sai:2} },
        { t:"æ’ä½ä¸€åœˆï¼šåˆ¹è½¦ç‚¹/å‡ºå¼¯ç‰µå¼•", w:{lec:3, ver:1} },
        { t:"æ²Ÿé€šä¸ç­–ç•¥ï¼šè®©å›¢é˜Ÿæ›´æ‡‚ä½ ", w:{sai:3, nor:1, ham:1} },
      ]
    },
    {
      q:"æœ€åä¸€é¢˜ï¼šä½ æ›´æƒ³è¢«åˆ«äººæ€ä¹ˆè¯„ä»·ï¼Ÿ",
      a:[
        { t:"â€œä»–çœŸçš„å¤ªå¿«äº†â€", w:{lec:3, ver:2} },
        { t:"â€œä»–æ€»èƒ½èµ¢åœ¨å…³é”®æ—¶åˆ»â€", w:{ham:3, ver:1} },
        { t:"â€œä»–æ°¸è¿œæœ‰åŠæ³•â€", w:{alo:3, sai:1} },
        { t:"â€œä»–åˆå¼ºåˆå¥½ç›¸å¤„â€", w:{nor:3, ham:1} },
      ]
    },
  ];

  // DOM
  const status = document.getElementById('status');
  const title = document.getElementById('title');
  const subtitle = document.getElementById('subtitle');
  const quizArea = document.getElementById('quizArea');
  const bar = document.getElementById('bar');
  const progress = document.getElementById('progress');
  const leader = document.getElementById('leader');
  const startBtn = document.getElementById('startBtn');
  const restartBtn = document.getElementById('restartBtn');
  const shareBtn = document.getElementById('shareBtn');

  // State
  const scores = Object.fromEntries(drivers.map(d => [d.id, 0]));
  let idx = -1;
  let finished = false;

  function reset() {
    for (const k in scores) scores[k]=0;
    idx = -1;
    finished = false;
    quizArea.innerHTML = "";
    title.textContent = "ç‚¹å‡»å¼€å§‹ï¼Œæµ‹æµ‹ä½ çš„â€œè½¦æ‰‹æ°”è´¨â€ ğŸ";
    subtitle.textContent = "ä¸€å…± 8 é¢˜ï¼Œé€‰ä½ æœ€åƒçš„ååº”ã€‚ç»“æœåªæ˜¯å¨±ä¹å‘~";
    status.textContent = "æœªå¼€å§‹";
    bar.style.width = "0%";
    progress.textContent = `0/${questions.length}`;
    startBtn.style.display = "";
    restartBtn.style.display = "none";
    shareBtn.style.display = "none";
    renderLeader();
  }

  function start() {
    if (finished) return;
    if (idx === -1) idx = 0;
    status.textContent = "ç­”é¢˜ä¸­";
    startBtn.style.display = "none";
    renderQuestion();
    renderLeader();
  }

  function renderQuestion() {
    const q = questions[idx];
    title.textContent = "Q" + (idx+1) + " / " + questions.length;
    subtitle.textContent = q.q;

    const pct = Math.round((idx / questions.length) * 100);
    bar.style.width = pct + "%";
    progress.textContent = `${idx}/${questions.length}`;

    quizArea.innerHTML = "";
    const box = document.createElement('div');
    box.className = "answers";

    q.a.forEach((opt, i) => {
      const btn = document.createElement('button');
      btn.className = "opt";
      btn.innerHTML = `<b>${i+1}.</b> ${opt.t}`;
      btn.addEventListener('click', () => choose(i));
      box.appendChild(btn);
    });

    quizArea.appendChild(box);
  }

  function choose(i) {
    const q = questions[idx];
    const opt = q.a[i];
    // åŠ åˆ†
    for (const [k,v] of Object.entries(opt.w)) {
      if (scores[k] != null) scores[k] += v;
    }
    // å°å¥–åŠ±ï¼šæ¯ç­”ä¸€é¢˜ç»™æ‰€æœ‰äºº +0ï¼ˆå ä½ä»¥åå¯æ‰©å±•ï¼‰
    idx++;
    if (idx >= questions.length) {
      finish();
    } else {
      renderQuestion();
      renderLeader();
    }
  }

  function finish() {
    finished = true;
    status.textContent = "å·²å®Œæˆ";
    bar.style.width = "100%";
    progress.textContent = `${questions.length}/${questions.length}`;

    // æ’åº
    const sorted = drivers
      .map(d => ({...d, s:scores[d.id]}))
      .sort((a,b)=>b.s-a.s);

    const top = sorted[0];
    const second = sorted[1];

    title.textContent = "ä½ çš„ç»“æœï¼š";
    subtitle.textContent = `ä½ æœ€åƒï¼š${top.name}ï¼ˆé¢†å…ˆç¬¬äºŒå ${top.s - second.s} åˆ†ï¼‰`;

    quizArea.innerHTML = `
      <div class="resultCard">
        <div class="badge" style="background:${top.color}">${top.emoji}</div>
        <div>
          <p class="rtitle">${top.name}</p>
          <p class="rdesc">${top.desc}</p>
          <div class="tags">
            ${top.tags.map(t=>`<span class="tag">${t}</span>`).join("")}
          </div>
          <div class="mini">å°å»ºè®®ï¼šç”¨ä½ çš„ä¼˜åŠ¿ï¼ˆ${top.tags[0]}ï¼‰å»æ‰“å…³é”®å±€ï¼Œä¼šå¾ˆå®¹æ˜“å‡ºæ•ˆæœã€‚</div>
        </div>
      </div>
    `;

    // åˆ†äº«æ–‡æ¡ˆ
    const shareText = `ğŸ æˆ‘æµ‹å‡ºæ¥æ›´åƒã€Œ${top.name}ã€ï¼\næ ‡ç­¾ï¼š${top.tags.join(" / ")}\næ¥æµ‹æµ‹ä½ æ˜¯å“ªä½è½¦æ‰‹ï¼š${location.href}`;
    shareBtn.dataset.share = shareText;
    restartBtn.style.display = "";
    shareBtn.style.display = "";

    renderLeader(sorted);
  }

  function renderLeader(sortedOverride) {
    const sorted = sortedOverride || drivers
      .map(d => ({...d, s:scores[d.id]}))
      .sort((a,b)=>b.s-a.s)
      .slice(0,4);

    leader.innerHTML = "";
    sorted.forEach((d, i) => {
      const row = document.createElement('div');
      row.className = "scoreRow";
      const max = Math.max(1, sorted[0].s);
      const pct = Math.round((d.s / max) * 100);
      row.innerHTML = `
        <div style="display:flex;gap:10px;align-items:center;min-width:180px">
          <div style="font-size:18px">${d.emoji}</div>
          <div>
            <div class="name">${i+1}. ${d.name}</div>
            <div class="small">${d.s} åˆ†</div>
          </div>
        </div>
        <div class="meter"><div style="width:${pct}%;background:linear-gradient(90deg,var(--b),var(--c))"></div></div>
      `;
      leader.appendChild(row);
    });
  }

  // å¿«æ·é”® 1-4 é€‰é¡¹
  window.addEventListener('keydown', (e) => {
    if (idx < 0 || finished) {
      if (e.code === "Space") start();
      return;
    }
    const n = Number(e.key);
    if (n>=1 && n<=4) choose(n-1);
  });

  // æŒ‰é’®
  startBtn.addEventListener('click', start);
  restartBtn.addEventListener('click', reset);
  shareBtn.addEventListener('click', async () => {
    const text = shareBtn.dataset.share || "";
    try {
      if (navigator.share) {
        await navigator.share({ text, title: "æµ‹æµ‹ä½ æ˜¯å“ªä½ F1 è½¦æ‰‹" });
      } else {
        await navigator.clipboard.writeText(text);
        shareBtn.textContent = "å·²å¤åˆ¶ âœ…";
        setTimeout(()=>shareBtn.textContent="å¤åˆ¶ç»“æœæ–‡æ¡ˆ", 1200);
      }
    } catch {
      // å…œåº•å¤åˆ¶
      try {
        await navigator.clipboard.writeText(text);
        shareBtn.textContent = "å·²å¤åˆ¶ âœ…";
        setTimeout(()=>shareBtn.textContent="å¤åˆ¶ç»“æœæ–‡æ¡ˆ", 1200);
      } catch {}
    }
  });

  reset();
})();
</script>
</body>
</html>
